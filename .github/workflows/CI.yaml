name:  CI Process
run-name:  ${{ github.actor}} is learning Github Actions
on:  [push]
jobs:
  behave-testing:
    #Setup of simple OS of choice. i.e. Linux
    #create VM with ubuntu OS
    runs-on:  ubuntu-latest

    steps:
      #Setup of envirionment for test
      - name:  checkout
        uses:  actions/checkout@v4.2.2
      - name:  List repo
        run:  |
            ls
            
      #install python
      - name: Setup Python
        uses: actions/setup-python@v5.3.0
        with:
          python-version:  '3.9'

      #install behave
      - name:  install pip
        run:  |
          python -m pip install --upgrade pip
          pip install behave

      #run
      - name:  run behave test
        run:  |
          behave

  create-issue:
    if: ${{ failure() }}  # Only runs if the previous workflow fails
    runs-on: ubuntu-latest

    steps:
      - name: Create Issue
        uses: actions/github-script@v6
        with:
          script: |
            const issueTitle = `Workflow Failed: ${{ github.workflow }}`;
            const issueBody = `
            ## Workflow Failure
            - **Repository:** ${{ github.repository }}
            - **Branch:** ${{ github.ref }}
            - **Run ID:** ${{ github.run_id }}
            - **Commit:** ${{ github.sha }}
            
            Please check the [workflow logs](https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}) for details.
            `;

            const { data: issue } = await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: issueTitle,
              body: issueBody,
              labels: ["bug", "workflow-failure"], // Optional labels
            });

            core.info(`Created issue #${issue.number}: ${issue.title}`);


      
          
          
    
          
                
